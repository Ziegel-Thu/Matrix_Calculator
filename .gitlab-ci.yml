stages:
  - build

build-mingw32:
  stage: build
  image: stateoftheartio/qt6:6.7-mingw-aqt
  script:
    - mkdir build && cd build
    - wine $HOME/.wine/drive_c/Qt/6.7.0/mingw_64/bin/qmake.exe ../matrix_calculator.pro
    - wine $HOME/.wine/drive_c/Qt/Tools/mingw1120_64/bin/mingw32-make.exe
    - wine $HOME/.wine/drive_c/Qt/6.7.0/mingw_64/bin/windeployqt.exe release/
  artifacts:
    paths:
      - build/release/
    expire_in: 1 week